<head>
    <meta charset="utf-8">
    <title>è“ç™½å›¾åºŠ| åŸºäºgithubå…è´¹åœ¨çº¿å›¾åºŠ - </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1.0, user-scalable=no">
    <link rel="icon" href="https://q1.qlogo.cn/g?b=qq&nk=448776129&s=640">
    <style>
        body {
            background-color: rgb(219, 228, 228);
        }
    </style>
</head>

<body>

    <div>
        <p style="text-align: center;">è“ç™½å›¾åºŠ| githubå…è´¹åœ¨çº¿æ— æŸå›¾åºŠ</p>
        <div id="links" style="width: 100%; height: 50px; margin-top: 20px;">
            <a style="text-align: center; display: block; font-size: 30px; cursor: pointer" onclick="myimg.click()">
                ğŸ‘†ğŸ»
            </a>
        </div>
    </div>

    <br>

    <center>
        <font size="4" color="#7FFFD4" face="Helvetica">
            <h3>ç¡®å®šå›¾ç‰‡åç¨ç­‰ï¼Œå› ä¸ºå›¾ç‰‡æ­£åœ¨ä¸Šä¼ ã€‚</h3><textarea name="" id="neirong" cols="42" rows="7"></textarea>
        </font>
    </center>

    <input style="visibility: hidden;" class="btn btn-primary" type="file" id="myimg" onchange="imgChange(this)"
        accept="image/png,image/gif,image/jpeg">

    <div>
        <div class="img111" style="height: 25px;width: 60%;margin: 0 auto ; display: none; ">
            <img src="https://img2.lbcolor.cn/https://raw.githubusercontent.com/448776129/imghub/main/img/1689832188521.gif"
                alt="" width="100%">
        </div>
    </div>
    </div>
    <footer>
        <p style="text-align: center;"><a href="www.ballyun.cn">é¢†å–å…è´¹è™šæ‹Ÿä¸»æœº</a></p>
    </footer>
    <script src="https://lib.baomitu.com/jquery/2.0.0/jquery.min.js"></script>
    <script src="http://wmcreksu.us1.host.ballyun.cn/img.js"></script>
    <script>
        function imgChange(img) {
            const reader = new FileReader();
            reader.onload = function (ev) {
                var imgFile = ev.target.result; //imgFileå°±æ˜¯å›¾ç‰‡çš„base64ç¼–ç 
                console.log(imgFile);

                base64url = imgFile.replace(/(.*)?,/, ''); //ç”¨æ­£åˆ™æ¶ˆé™¤å‰é¢çš„dataä¹‹ç±»çš„å­—ç¬¦
                form = imgFile.substring(imgFile.indexOf("/") + 1, imgFile.indexOf(";")); //è·å–å›¾ç‰‡åŸæœ¬çš„æ ¼å¼
                console.log(imgFile);
                uploadimg(base64url, form); //ä¸Šä¼ 
            }
            reader.readAsDataURL(img.files[0]);
        }

        // ----------------------------

        function uploadimg(file, form) {
            // alert(4)
            let timestamp = new Date().getTime(); //è·å–æ—¶é—´æˆ³
            let newname = "https://raw.githubusercontent.com/ä½ çš„ç”¨æˆ·å/ä»“åº“å/ç›®å½•(ç•™ç©ºä»£è¡¨æ ¹ç›®å½•)/" + timestamp + "." + form; //ä»¥äº‹ä»¶æˆ³é‡å‘½å
            console.log(newname);
            $.ajax({
                url: "https://api.github.com/repos/ä½ çš„ç”¨æˆ·å/ä»“åº“å/ç›®å½•(ç•™ç©ºä»£è¡¨æ ¹ç›®å½•)/" + timestamp + "." + form,
                method: "PUT",
                headers: {
                    "Authorization": "å¯†é’¥,åœ¨githubçš„ä¸ªäºº å·¦ä¾§çš„ç”³è¯·",
                    "Content-Type": "text/plain"
                },
                data: "{\r\n \"message\": \"upload\",\r\n \"content\": \"" + file + "\"\r\n}",
                success: function () {
                    console.log(111);
                    $("#neirong").html("github:" + newname) //å†™åˆ°htmlé‡Œé¢
                }
            })
        }

        //æŒ‰é”®è§¦å‘ 
        document.onkeydown = function () {
            //ç¦æ­¢ ctrl+u
            if (event.ctrlKey && window.event.keyCode == 85) {
                return false;
            }
            //ç¦æ­¢ F12
            if (window.event && window.event.keyCode == 123) {
                event.keyCode = 0;
                event.returnValue = false;
            }
        }
    </script>

</body>

</html>